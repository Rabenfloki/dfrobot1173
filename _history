{"entries":[{"timestamp":1768937597063,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":84,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":207,"length1":38,"diffs":[[1,"        \"README.md\"\n"]]},{"start1":234,"length1":79,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]},{"type":"added","filename":"test.ts","value":"// Hier kann man Tests durchf√ºhren; diese Datei wird nicht kompiliert, wenn dieses Paket als Erweiterung verwendet wird.\n"},{"type":"added","filename":"dfr.ts","value":"/**\n* DFR1173 Voice Prompter\n* Refer to https://github.com/DFRobotdl/DFROBOTDL/tree/main/DFR1173\n*/\n\n//% weight=9 color=#018391 icon=\"\\uf001\" block=\"DFR1173\"\nnamespace dfr1173 {\n    /* [$S,CMD,LenHi,LenLo,para1,para2,$0] */\n    let dataArr: number[] = [0x7E, 0x00, 0x00, 0x02, 0x00, 0x00, 0xEF]\n    let isConnected: boolean = false;\n\n    export enum playType {\n        //% block=\"Play\"\n        Play = 0x0D,\n        //% block=\"Stop\"\n        Stop = 0x16,\n        //% block=\"Play Next\"\n        PlayNext = 0x01,\n        //% block=\"Play Previous\"\n        PlayPrevious = 0x02,\n        //% block=\"Pause\"\n        Pause = 0x0E\n    }\n\n    export enum isRepeat {\n        //% block=\"No\"\n        No = 0,\n        //% block=\"Yes\"\n        Yes = 1\n    }\n\n    function sendData(): void {\n        let myBuf = pins.createBuffer(7);\n        for (let i = 0; i < 7; i++) {\n            myBuf.setNumber(NumberFormat.UInt8BE, i, dataArr[i])\n        }\n        serial.writeBuffer(myBuf)\n        basic.pause(100)\n    }\n\n    function innerCall(CMD: number, para1: number, para2: number): void {\n        if (!isConnected) {\n            connect(SerialPin.P0, SerialPin.P1)\n        }\n        dataArr[1] = CMD\n        dataArr[4] = para1\n        dataArr[5] = para2\n        sendData()\n    }\n\n    /**\n     * Connect DFR1173 to Serial\n     * @param pinRX RX Pin, eg: SerialPin.P0\n     * @param pinTX TX Pin, eg: SerialPin.P1\n     */\n    //% blockId=\"dfr_connect\" block=\"connect to DFR1173, RX:%pinRX|TX:%pinTX\"\n    //% weight=100 blockGap=20\n    export function connect(pinRX: SerialPin = SerialPin.P0, pinTX: SerialPin = SerialPin.P1): void {\n        serial.redirect(pinRX, pinTX, BaudRate.BaudRate9600)\n        isConnected = true\n        basic.pause(100)\n    }\n\n    //% blockId=\"dfr_action\" block=\"Action:%myPlayType\"\n    //% weight=99 blockGap=20\n    export function press(myPlayType: playType): void {\n        innerCall(myPlayType, 0x00, 0x00)\n    }\n\n    //% blockId=\"dfr_playFile\" block=\"play DFR file:%fileNumber|repeat:%setRepeat\"\n    //% weight=98 blockGap=20 fileNumber.min=1 fileNumber.max=255\n    export function playFile(fileNumber: number, setRepeat: isRepeat): void {\n        innerCall(0x03, 0x00, fileNumber)\n        press(0x0D)\n        if (setRepeat == 1) press(0x19)\n    }\n\n    //% blockId=\"dfr_playFileInFolder\" block=\"play DFR folder:%folderNumber|file:%fileNumber|repeat:%setRepeat\"\n    //% weight=97 blockGap=20 folderNumber.min=1 folderNumber.max=99 fileNumber.min=1 fileNumber.max=255\n    export function playFileInFolder(folderNumber: number, fileNumber: number, setRepeat: isRepeat): void {\n        innerCall(0x0F, folderNumber, fileNumber)\n        if (setRepeat == 1) press(0x19)\n    }\n\n    //% blockId=\"dfr_playLoopAllFiles\" block=\"loop play all files\"\n    //% weight=96 blockGap=20 \n    export function playLoopAllFiles(): void {\n        innerCall(0x11, 0x00, 0x01)\n    }\n\n    //% blockId=\"dfr_playRandom\" block=\"random play all files\"\n    //% weight=95 blockGap=20\n    export function playRandomAllFiles(): void {\n        innerCall(0x18, 0x00, 0x01)\n    }\n\n    //% blockId=\"dfr_setVolume\" block=\"set volume(0~30):%volume\"\n    //% weight=94 blockGap=20 volume.min=0 volume.max=30\n    export function setVolume(volume: number): void {\n        innerCall(0x06, 0x00, volume | 0)\n    }\n\n}"}]}],"snapshots":[{"timestamp":1768937597062,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"DFRobot1173\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}}],"shares":[],"lastSaveTime":1768937793454}